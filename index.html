<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Propuesta Equipamiento Audiovisual - Biblioteca</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#fcfaf8',
                            100: '#f7f3ef',
                            200: '#efe6dc',
                            300: '#e0cbb8',
                            500: '#a68a6d',
                            700: '#5c4d3c',
                            900: '#3d3228',
                        }
                    },
                    fontFamily: {
                        sans: ['Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            height: 350px;
            margin: 0 auto;
        }
        
        .product-card-active {
            border-left: 4px solid #a68a6d;
            background-color: #f7f3ef;
        }
        
        .product-card-inactive {
            border-left: 4px solid transparent;
        }

        .product-card-inactive:hover {
            background-color: #fcfaf8;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: 
         Updated to include DJI Mic Mini to optimize budget.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-brand-50 text-gray-800 font-sans min-h-screen flex flex-col">

    <!-- Navbar / Header -->
    <header class="bg-white shadow-sm sticky top-0 z-10">
        <div class="max-w-6xl mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold text-brand-900">üé• Equipamiento Biblioteca</h1>
                <p class="text-sm text-gray-500">Versi√≥n Optimizada (DJI Mic Mini)</p>
            </div>
            <div class="mt-4 md:mt-0 text-right">
                <span class="block text-xs uppercase tracking-wide text-gray-400 font-semibold">Inversi√≥n Total Estimada</span>
                <span class="text-2xl font-bold text-brand-700" id="total-budget-display">$13,700 MXN</span>
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-6xl mx-auto px-4 py-8 w-full space-y-12">

        <!-- Intro Section -->
        <section class="bg-white rounded-xl shadow-sm p-6 border border-brand-100">
            <h2 class="text-xl font-semibold text-brand-900 mb-2">Objetivo del Proyecto</h2>
            <p class="text-gray-600 leading-relaxed">
                Esta propuesta ha sido ajustada para maximizar el ahorro mediante el uso del nuevo sistema <strong>DJI Mic Mini</strong>. 
                Mantenemos la calidad profesional en video y audio, pero reducimos la inversi√≥n inicial en m√°s de un 20% comparado con la propuesta anterior.
            </p>
        </section>

        <!-- Interactive Kit Explorer -->
        <section>
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-brand-900">Explorador del Kit</h2>
                <p class="text-gray-600">Selecciona un componente para ver por qu√© fue elegido y sus especificaciones.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                
                <!-- Left: Component List -->
                <div class="lg:col-span-4 flex flex-col space-y-3" id="product-list-container">
                </div>

                <!-- Right: Detail View -->
                <div class="lg:col-span-8">
                    <div id="detail-panel" class="bg-white rounded-xl shadow-lg border border-brand-100 overflow-hidden h-full flex flex-col">
                    </div>
                </div>
            </div>
        </section>

        <!-- Financial Analysis Section -->
        <section class="bg-white rounded-xl shadow-sm p-6 border border-brand-100">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div>
                    <h2 class="text-xl font-semibold text-brand-900 mb-4">Distribuci√≥n del Presupuesto</h2>
                    <p class="text-gray-600 mb-4">
                        Con el cambio a <strong>DJI Mic Mini</strong>, la c√°mara representa ahora la mayor parte de la inversi√≥n. 
                        Este equilibrio es ideal para una biblioteca que prioriza la durabilidad de la imagen.
                    </p>
                    <div class="bg-brand-50 p-4 rounded-lg border border-brand-200">
                        <h3 class="font-bold text-brand-900 mb-2">Ahorro Generado:</h3>
                        <ul class="space-y-2 text-sm text-gray-700">
                            <li>‚Ä¢ Ahorro en audio: <strong>~$4,000 MXN</strong></li>
                            <li>‚Ä¢ Margen para otros gastos: <strong>~$5,300 MXN</strong> (respecto al tope de $19k)</li>
                            <li>‚Ä¢ Estado: Altamente eficiente.</li>
                        </ul>
                    </div>
                </div>
                
                <div class="flex flex-col items-center justify-center">
                    <div class="chart-container">
                        <canvas id="budgetChart"></canvas>
                    </div>
                    <p class="text-xs text-gray-400 mt-2 text-center">Costos optimizados (Amazon M√©xico)</p>
                </div>
            </div>
        </section>

        <!-- Detailed Purchase Table -->
        <section class="pb-12">
            <h2 class="text-xl font-semibold text-brand-900 mb-4">Lista de Compra Detallada</h2>
            <div class="overflow-x-auto bg-white rounded-xl shadow-sm border border-brand-100">
                <table class="w-full text-left text-sm text-gray-600">
                    <thead class="bg-brand-50 text-brand-900 uppercase font-bold text-xs">
                        <tr>
                            <th class="px-6 py-4 rounded-tl-xl">Producto</th>
                            <th class="px-6 py-4 text-center">Cant.</th>
                            <th class="px-6 py-4 text-right">Precio Unit. Est.</th>
                            <th class="px-6 py-4 text-right rounded-tr-xl">Acci√≥n</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-brand-100" id="purchase-table-body">
                    </tbody>
                    <tfoot class="bg-brand-50 font-bold text-brand-900">
                        <tr>
                            <td class="px-6 py-4">Total Optimizado</td>
                            <td class="px-6 py-4 text-center"></td>
                            <td class="px-6 py-4 text-right" id="table-total-display">$0</td>
                            <td class="px-6 py-4"></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </section>

    </main>

    <footer class="bg-brand-900 text-brand-100 py-8 text-center text-sm">
        <p>Versi√≥n de Presupuesto Optimizado para Biblioteca Escolar</p>
    </footer>

    <script>
        const products = [
            {
                id: 1,
                name: "DJI Osmo Action 4 (Combo Est√°ndar)",
                category: "C√°mara",
                icon: "üìπ",
                price: 6200,
                qty: 1,
                description: "C√°mara 4K ultra resistente con estabilizaci√≥n y pantalla frontal.",
                reason: "Mantiene la calidad visual 4K. Es el componente m√°s duradero del kit.",
                link: "https://www.amazon.com.mx/dp/B0C997C6P7",
                image: "https://m.media-amazon.com/images/I/61mO-p+o9zL._AC_SL1500_.jpg",
                specs: ["4K Video", "RockSteady 3.0", "Pantalla T√°ctil Color", "Montaje Magn√©tico"]
            },
            {
                id: 2,
                name: "DJI Mic Mini (2 TX + 1 RX)",
                category: "Audio",
                icon: "üéôÔ∏è",
                price: 3200,
                qty: 1,
                description: "Sistema de audio inal√°mbrico ultra ligero y compacto.",
                reason: "Ahorra $4,000 MXN manteniendo la tecnolog√≠a DJI. Es m√°s discreto y ligero para los alumnos.",
                link: "https://www.amazon.com.mx/s?k=DJI+Mic+Mini+wireless",
                image: "https://m.media-amazon.com/images/I/51pSizk9l5L._AC_SL1500_.jpg",
                specs: ["Ultra Ligero", "48kHz/24-bit", "Cancelaci√≥n de Ruido", "Conexi√≥n Bluetooth/Directa"]
            },
            {
                id: 3,
                name: "Kit Luces LED Port√°tiles",
                category: "Iluminaci√≥n",
                icon: "üí°",
                price: 2500,
                qty: 1,
                description: "Dos paneles LED con tripies ajustables.",
                reason: "Fundamental para evitar el aspecto 'oscuro' de las grabaciones en interiores.",
                link: "https://www.amazon.com.mx/dp/B07YFY7H7L",
                image: "https://m.media-amazon.com/images/I/71uV6tN6B8L._AC_SL1500_.jpg",
                specs: ["Carga USB/AC", "Bicolor", "Tripies de 1.2m", "Filtros de Color"]
            },
            {
                id: 4,
                name: "Tripie H√≠brido 1.5m",
                category: "Estabilidad",
                icon: "üìê",
                price: 800,
                qty: 1,
                description: "Soporte estable para c√°mara y smartphone.",
                reason: "Econ√≥mico y funcional para tomas est√°ticas de entrevistas.",
                link: "https://www.amazon.com.mx/dp/B08V1S6N85",
                image: "https://m.media-amazon.com/images/I/61KpxD7hPML._AC_SL1500_.jpg",
                specs: ["Aluminio", "Cabezal de 3 v√≠as", "F√°cil de plegar", "Soporte Celular"]
            },
            {
                id: 5,
                name: "Memoria MicroSD 128GB (x2)",
                category: "Almacenamiento",
                icon: "üíæ",
                price: 500,
                qty: 2,
                description: "Tarjetas SanDisk Extreme de alta velocidad.",
                reason: "Permite tener una memoria en uso y otra libre para descarga de material.",
                link: "https://www.amazon.com.mx/dp/B07FCMKK5X",
                image: "https://m.media-amazon.com/images/I/617pZ6068SL._AC_SL1500_.jpg",
                specs: ["128 GB", "Video V30", "A2 Rating", "Protecci√≥n de datos"]
            }
        ];

        const formatMoney = (amount) => {
            return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN', maximumFractionDigits: 0 }).format(amount);
        };

        let selectedProductIndex = 0;
        let chartInstance = null;

        const listContainer = document.getElementById('product-list-container');
        const detailPanel = document.getElementById('detail-panel');
        const purchaseTableBody = document.getElementById('purchase-table-body');
        const tableTotalDisplay = document.getElementById('table-total-display');
        const budgetChartCtx = document.getElementById('budgetChart');

        function renderProductList() {
            listContainer.innerHTML = '';
            products.forEach((product, index) => {
                const isSelected = index === selectedProductIndex;
                const button = document.createElement('button');
                button.className = `w-full text-left p-4 rounded-lg transition-all duration-200 flex items-center justify-between group ${isSelected ? 'product-card-active shadow-md' : 'product-card-inactive bg-white border border-transparent'}`;
                button.onclick = () => selectProduct(index);

                button.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">${product.icon}</span>
                        <div>
                            <p class="font-bold text-gray-800 ${isSelected ? 'text-brand-900' : ''}">${product.category}</p>
                            <p class="text-xs text-gray-500 truncate w-32 md:w-48">${product.name}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-semibold text-brand-700 text-sm">${formatMoney(product.price * product.qty)}</p>
                    </div>
                `;
                listContainer.appendChild(button);
            });
        }

        function renderDetailPanel() {
            const product = products[selectedProductIndex];
            const totalPrice = product.price * product.qty;
            const specsHtml = product.specs.map(spec => `<span class="inline-block bg-brand-100 text-brand-900 text-xs px-2 py-1 rounded-full font-medium mr-2 mb-2">${spec}</span>`).join('');

            detailPanel.innerHTML = `
                <div class="fade-in h-full flex flex-col md:flex-row">
                    <div class="md:w-1/2 bg-gray-50 p-6 flex items-center justify-center border-b md:border-b-0 md:border-r border-brand-100 relative">
                        <div class="absolute top-4 left-4 bg-white px-3 py-1 rounded-full shadow-sm text-xs font-bold text-gray-500 border border-gray-100">Cant: ${product.qty}</div>
                        <img src="${product.image}" alt="${product.name}" class="max-h-64 object-contain mix-blend-multiply hover:scale-105 transition-transform duration-300">
                    </div>
                    <div class="md:w-1/2 p-6 md:p-8 flex flex-col justify-between overflow-y-auto">
                        <div>
                            <div class="flex items-center justify-between mb-2"><span class="text-brand-500 font-bold uppercase tracking-wider text-xs">${product.category}</span><span class="text-2xl">${product.icon}</span></div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4 leading-tight">${product.name}</h3>
                            <div class="mb-6"><h4 class="text-sm font-bold text-gray-700 mb-1">Impacto Presupuestario:</h4><p class="text-gray-600 text-sm italic border-l-2 border-brand-300 pl-3">"${product.reason}"</p></div>
                            <div class="mb-6"><h4 class="text-sm font-bold text-gray-700 mb-2">Caracter√≠sticas:</h4><div class="flex flex-wrap">${specsHtml}</div></div>
                        </div>
                        <div class="pt-6 border-t border-gray-100">
                            <div class="flex items-end justify-between mb-4"><span class="text-gray-500 text-sm">Costo Subtotal</span><span class="text-3xl font-bold text-brand-700">${formatMoney(totalPrice)}</span></div>
                            <a href="${product.link}" target="_blank" class="block w-full text-center bg-brand-700 hover:bg-brand-900 text-white font-bold py-3 px-4 rounded-lg transition-colors shadow-lg">Comprar en Amazon ‚Üó</a>
                        </div>
                    </div>
                </div>`;
        }

        function renderTable() {
            let grandTotal = 0;
            purchaseTableBody.innerHTML = '';
            products.forEach(product => {
                const total = product.price * product.qty;
                grandTotal += total;
                const row = document.createElement('tr');
                row.className = "hover:bg-brand-50 transition-colors";
                row.innerHTML = `<td class="px-6 py-4"><div class="font-medium text-gray-900">${product.name}</div><div class="text-xs text-gray-500">${product.category}</div></td><td class="px-6 py-4 text-center"><span class="bg-gray-100 text-gray-800 text-xs font-bold px-2 py-1 rounded">${product.qty}</span></td><td class="px-6 py-4 text-right font-medium text-gray-700">${formatMoney(total)}</td><td class="px-6 py-4 text-right"><a href="${product.link}" target="_blank" class="text-brand-700 font-bold underline">Link</a></td>`;
                purchaseTableBody.appendChild(row);
            });
            const formattedTotal = formatMoney(grandTotal);
            tableTotalDisplay.innerText = formattedTotal;
            document.getElementById('total-budget-display').innerText = formattedTotal;
        }

        function initChart() {
            const data = products.map(p => p.price * p.qty);
            chartInstance = new Chart(budgetChartCtx, {
                type: 'doughnut',
                data: {
                    labels: products.map(p => p.category),
                    datasets: [{
                        data: data,
                        backgroundColor: ['#5c4d3c', '#a68a6d', '#e0cbb8', '#d1d5db', '#9ca3af'],
                        borderWidth: 0
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } }
            });
        }

        function selectProduct(index) {
            selectedProductIndex = index;
            renderProductList();
            renderDetailPanel();
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderProductList();
            renderDetailPanel();
            renderTable();
            initChart();
        });
    </script>
</body>
</html>
