<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Propuesta Equipamiento Audiovisual - Biblioteca</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#fcfaf8',
                            100: '#f7f3ef',
                            200: '#efe6dc',
                            300: '#e0cbb8',
                            500: '#a68a6d',
                            700: '#5c4d3c',
                            900: '#3d3228',
                        }
                    },
                    fontFamily: {
                        sans: ['Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            height: 300px;
            margin: 0 auto;
        }
        
        .product-card-active {
            border-left: 4px solid #a68a6d;
            background-color: #f7f3ef;
        }
        
        .product-card-inactive {
            border-left: 4px solid transparent;
        }

        .product-card-inactive:hover {
            background-color: #fcfaf8;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .img-container img {
            max-width: 100%;
            max-height: 280px;
            object-fit: contain;
            mix-blend-mode: multiply;
        }
    </style>
</head>
<body class="bg-brand-50 text-gray-800 font-sans min-h-screen flex flex-col">

    <!-- Navbar / Header -->
    <header class="bg-white shadow-sm sticky top-0 z-10">
        <div class="max-w-6xl mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold text-brand-900">üé• Equipamiento Biblioteca</h1>
                <p class="text-sm text-gray-500">Kit de Producci√≥n de Video Escolar</p>
            </div>
            <div class="mt-4 md:mt-0 text-right">
                <span class="block text-xs uppercase tracking-wide text-gray-400 font-semibold">Presupuesto Estimado</span>
                <span class="text-2xl font-bold text-brand-700" id="total-budget-display">$0 MXN</span>
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-6xl mx-auto px-4 py-8 w-full space-y-12">

        <!-- Intro Section -->
        <section class="bg-white rounded-xl shadow-sm p-6 border border-brand-100">
            <h2 class="text-xl font-semibold text-brand-900 mb-2">Resumen de Propuesta</h2>
            <p class="text-gray-600 leading-relaxed">
                Selecci√≥n de equipo optimizado para la creaci√≥n de contenido en la biblioteca. Este kit prioriza la facilidad de uso para alumnos y la durabilidad de los componentes, asegurando una excelente calidad de audio y video con los mejores precios de Amazon M√©xico.
            </p>
        </section>

        <!-- Interactive Kit Explorer -->
        <section>
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-brand-900">Detalle del Equipo</h2>
                <p class="text-gray-600">Explora las especificaciones t√©cnicas de cada componente.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                
                <!-- Left: Component List -->
                <div class="lg:col-span-4 flex flex-col space-y-3" id="product-list-container">
                </div>

                <!-- Right: Detail View -->
                <div class="lg:col-span-8">
                    <div id="detail-panel" class="bg-white rounded-xl shadow-lg border border-brand-100 overflow-hidden h-full flex flex-col">
                    </div>
                </div>
            </div>
        </section>

        <!-- Financial Analysis Section -->
        <section class="bg-white rounded-xl shadow-sm p-6 border border-brand-100">
            <div class="flex flex-col items-center">
                <h2 class="text-xl font-semibold text-brand-900 mb-6">Distribuci√≥n del Presupuesto</h2>
                <div class="chart-container">
                    <canvas id="budgetChart"></canvas>
                </div>
                <p class="text-xs text-gray-400 mt-6 text-center uppercase tracking-widest">Inversi√≥n porcentual por categor√≠a de producto</p>
            </div>
        </section>

        <!-- Detailed Purchase Table -->
        <section class="pb-12">
            <h2 class="text-xl font-semibold text-brand-900 mb-4">Lista de Adquisici√≥n</h2>
            <div class="overflow-x-auto bg-white rounded-xl shadow-sm border border-brand-100">
                <table class="w-full text-left text-sm text-gray-600">
                    <thead class="bg-brand-50 text-brand-900 uppercase font-bold text-xs">
                        <tr>
                            <th class="px-6 py-4 rounded-tl-xl">Producto</th>
                            <th class="px-6 py-4 text-center">Cant.</th>
                            <th class="px-6 py-4 text-right">Total Est.</th>
                            <th class="px-6 py-4 text-right rounded-tr-xl">Enlace</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-brand-100" id="purchase-table-body">
                    </tbody>
                    <tfoot class="bg-brand-50 font-bold text-brand-900">
                        <tr>
                            <td class="px-6 py-4">Inversi√≥n Total</td>
                            <td class="px-6 py-4 text-center"></td>
                            <td class="px-6 py-4 text-right text-lg" id="table-total-display">$0</td>
                            <td class="px-6 py-4"></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </section>

    </main>

    <footer class="bg-brand-900 text-brand-100 py-8 text-center text-sm">
        <p>Propuesta Audiovisual - Biblioteca Escolar</p>
        <p class="mt-2 text-xs text-brand-300">Links e im√°genes actualizados de Amazon M√©xico</p>
    </footer>

    <script>
        const products = [
            {
                id: 1,
                name: "DJI Osmo Action 4 (Combo Est√°ndar)",
                category: "C√°mara",
                icon: "üìπ",
                price: 5299,
                qty: 1,
                description: "C√°mara de acci√≥n 4K con sensor de 1/1.3 pulgadas, ideal para grabaciones de alta calidad en biblioteca.",
                link: "https://www.amazon.com.mx/DJI-Pack-Esencial-Osmo-Action/dp/B0DS2B3P2B/",
                image: "https://m.media-amazon.com/images/I/71yy0R84-lL._AC_SL1500_.jpg",
                specs: ["Sensor CMOS 1/1.3\"", "Grabaci√≥n 4K/120fps", "D-Log M de 10 bits", "HorizonSteady 360¬∞"]
            },
            {
                id: 2,
                name: "DJI Mic Mini (2 TX + 1 RX)",
                category: "Audio",
                icon: "üéôÔ∏è",
                price: 3399,
                qty: 1,
                description: "Sistema de micr√≥fono inal√°mbrico ultraligero con cancelaci√≥n de ruido activa.",
                link: "https://www.amazon.com.mx/DJI-superligero-cancelaci%C3%B3n-micr%C3%B3fono-inal%C3%A1mbrico/dp/B0DDL8WGH5/",
                image: "https://m.media-amazon.com/images/I/61l6NdcbuqL._AC_SX679_.jpg",
                specs: ["Peso de solo 10g", "48 kHz/24 bits", "Cancelaci√≥n de ruido activa", "40m alcance Bluetooth"]
            },
            {
                id: 3,
                name: "Neewer Kit Iluminaci√≥n LED (2 Pack)",
                category: "Luz",
                icon: "üí°",
                price: 2163,
                qty: 1,
                description: "Paneles LED bicolores regulables con soporte para iluminaci√≥n de estudio profesional.",
                link: "https://www.amazon.com.mx/Neewer-Unidades-Bi-color-Regulable-Soporte/dp/B072Q42GXQ/",
                image: "https://m.media-amazon.com/images/I/71H5ba4afyL._AC_SX679_.jpg",
                specs: ["480 bombillas LED", "Temperatura 3200-5600K", "Soportes ajustables de 1.9m", "Estuche de transporte"]
            },
            {
                id: 4,
                name: "Soporte Tr√≠pode DJI Osmo Pocket/Mobile",
                category: "Soporte",
                icon: "üìê",
                price: 599,
                qty: 1,
                description: "Mini tr√≠pode original DJI, compacto y estable para tomas de escritorio o fijas.",
                link: "https://www.amazon.com.mx/Osmo-Mobile-Soporte-tr%C3%ADpode-Mobile-Osmo-Pocket/dp/B0F8Q4MH8V/",
                image: "https://m.media-amazon.com/images/I/6173SxHrpsL._AC_SX679_.jpg",
                specs: ["Dise√±o oficial DJI", "Patas antideslizantes", "Cierre magn√©tico", "Compacto para transporte"]
            },
            {
                id: 5,
                name: "SanDisk Extreme Pro 128GB",
                category: "Memoria",
                icon: "üíæ",
                price: 489,
                qty: 2,
                description: "Tarjeta MicroSDXC optimizada para video 4K UHD con altas velocidades de escritura.",
                link: "https://www.amazon.com.mx/SanDisk-microSDXC-Adaptador-RescuePRO-Performance/dp/B09X7CRKRZ/",
                image: "https://m.media-amazon.com/images/I/719ZXZP+5LL._AC_SX679_.jpg",
                specs: ["Velocidad hasta 200MB/s", "Clase de video V30", "Clase de rendimiento A2", "Incluye adaptador SD"]
            }
        ];

        const formatMoney = (amount) => {
            return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN', maximumFractionDigits: 0 }).format(amount);
        };

        let selectedProductIndex = 0;
        let chartInstance = null;

        const listContainer = document.getElementById('product-list-container');
        const detailPanel = document.getElementById('detail-panel');
        const purchaseTableBody = document.getElementById('purchase-table-body');
        const tableTotalDisplay = document.getElementById('table-total-display');
        const budgetChartCtx = document.getElementById('budgetChart');

        function renderProductList() {
            listContainer.innerHTML = '';
            products.forEach((product, index) => {
                const isSelected = index === selectedProductIndex;
                const button = document.createElement('button');
                button.className = `w-full text-left p-4 rounded-lg transition-all duration-200 flex items-center justify-between group ${isSelected ? 'product-card-active shadow-md' : 'product-card-inactive bg-white border border-transparent'}`;
                button.onclick = () => selectProduct(index);

                button.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">${product.icon}</span>
                        <div>
                            <p class="font-bold text-gray-800 ${isSelected ? 'text-brand-900' : ''}">${product.category}</p>
                            <p class="text-xs text-gray-500 truncate w-32 md:w-48">${product.name}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-semibold text-brand-700 text-sm">${formatMoney(product.price * product.qty)}</p>
                    </div>
                `;
                listContainer.appendChild(button);
            });
        }

        function renderDetailPanel() {
            const product = products[selectedProductIndex];
            const totalPrice = product.price * product.qty;
            const specsHtml = product.specs.map(spec => `
                <li class="flex items-start space-x-2 text-gray-600 text-sm py-1">
                    <span class="text-brand-500 mt-1">‚óè</span>
                    <span>${spec}</span>
                </li>
            `).join('');

            detailPanel.innerHTML = `
                <div class="fade-in h-full flex flex-col md:flex-row">
                    <div class="md:w-1/2 bg-gray-50 p-6 flex items-center justify-center border-b md:border-b-0 md:border-r border-brand-100 img-container">
                        <img src="${product.image}" alt="Imagen de ${product.name}" onerror="this.src='https://via.placeholder.com/300x300?text=Cargando...'">
                    </div>
                    <div class="md:w-1/2 p-6 md:p-8 flex flex-col justify-between overflow-y-auto">
                        <div>
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-brand-500 font-bold uppercase tracking-wider text-xs">${product.category}</span>
                                <span class="text-2xl">${product.icon}</span>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900 mb-3 leading-tight">${product.name}</h3>
                            <p class="text-gray-500 text-sm mb-6">${product.description}</p>
                            
                            <div class="mb-6">
                                <h4 class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-3">Caracter√≠sticas T√©cnicas</h4>
                                <ul class="space-y-1">${specsHtml}</ul>
                            </div>
                        </div>
                        <div class="pt-6 border-t border-gray-100">
                            <div class="flex items-end justify-between mb-4">
                                <span class="text-gray-500 text-sm font-medium">Inversi√≥n Subtotal</span>
                                <span class="text-3xl font-bold text-brand-700">${formatMoney(totalPrice)}</span>
                            </div>
                            <a href="${product.link}" target="_blank" class="block w-full text-center bg-brand-700 hover:bg-brand-900 text-white font-bold py-3 px-4 rounded-lg transition-colors shadow-lg">Ver en Amazon ‚Üó</a>
                        </div>
                    </div>
                </div>`;
        }

        function renderTable() {
            let grandTotal = 0;
            purchaseTableBody.innerHTML = '';
            products.forEach(product => {
                const total = product.price * product.qty;
                grandTotal += total;
                const row = document.createElement('tr');
                row.className = "hover:bg-brand-50 transition-colors";
                row.innerHTML = `
                    <td class="px-6 py-4">
                        <div class="font-medium text-gray-900">${product.name}</div>
                        <div class="text-xs text-gray-400 font-bold uppercase">${product.category}</div>
                    </td>
                    <td class="px-6 py-4 text-center">
                        <span class="bg-gray-100 text-gray-800 text-xs font-bold px-2 py-1 rounded">${product.qty}</span>
                    </td>
                    <td class="px-6 py-4 text-right font-medium text-gray-700">${formatMoney(total)}</td>
                    <td class="px-6 py-4 text-right">
                        <a href="${product.link}" target="_blank" class="text-brand-700 hover:text-brand-900 font-bold text-xs uppercase tracking-tighter underline">Enlace Directo</a>
                    </td>`;
                purchaseTableBody.appendChild(row);
            });
            const formattedTotal = formatMoney(grandTotal);
            tableTotalDisplay.innerText = formattedTotal;
            document.getElementById('total-budget-display').innerText = formattedTotal;
        }

        function initChart() {
            const data = products.map(p => p.price * p.qty);
            if(chartInstance) chartInstance.destroy();
            chartInstance = new Chart(budgetChartCtx, {
                type: 'doughnut',
                data: {
                    labels: products.map(p => p.category),
                    datasets: [{
                        data: data,
                        backgroundColor: ['#5c4d3c', '#a68a6d', '#e0cbb8', '#d1d5db', '#9ca3af'],
                        hoverOffset: 15,
                        borderWidth: 4,
                        borderColor: '#ffffff'
                    }]
                },
                options: { 
                    responsive: true, 
                    maintainAspectRatio: false, 
                    plugins: { 
                        legend: { 
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: { size: 12, family: 'Segoe UI' }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ' ' + context.label + ': ' + formatMoney(context.raw);
                                }
                            }
                        }
                    },
                    cutout: '70%'
                }
            });
        }

        function selectProduct(index) {
            selectedProductIndex = index;
            renderProductList();
            renderDetailPanel();
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderProductList();
            renderDetailPanel();
            renderTable();
            initChart();
        });
    </script>
</body>
</html>
